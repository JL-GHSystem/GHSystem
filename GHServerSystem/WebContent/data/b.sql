CREATE TABLE TBL_NEW_CORE_MENU (
O_MENUID NVARCHAR2(50) NOT NULL DEFAULT SYS_GUID() PRIMARY KEY,
O_MENUPEVID NVARCHAR2(50) DEFAULT '-1'  NULL ,
O_MENUNAME NVARCHAR2(50) NOT NULL ,
O_MENULEVEL NUMBER(30) DEFAULT 0  NULL ,
O_MENUSORTID NUMBER(30) DEFAULT 0  NULL ,
O_MENUURL NVARCHAR2(500) DEFAULT '#'  NULL ,
O_MENUENABLED NUMBER(1) DEFAULT 1  NULL 
);

CREATE TABLE TBL_NEW_CORE_USER_MENU (
O_ID NVARCHAR2(50) DEFAULT SYS_GUID() PRIMARY KEY NOT NULL,
O_USERID NVARCHAR2(50) NOT NULL,
O_MENUID NVARCHAR2(50) NOT NULL,
CONSTRAINT fk_MUM foreign key (O_MENUID) references TBL_NEW_CORE_MENU(O_MENUID)
);

CREATE TABLE TBL_NEW_CORE_USERGROUP (
O_USERGROUPID NVARCHAR2(50) NOT NULL DEFAULT SYS_GUID() PRIMARY KEY,
O_USERGROUPNAME NVARCHAR2(50) NULL
);

CREATE TABLE TBL_NEW_CORE_USERGROUP_MENU (
O_ID NVARCHAR2(50) DEFAULT SYS_GUID() PRIMARY KEY NOT NULL,
O_USERGROUPID NVARCHAR2(50) NOT NULL,
O_MENUID NVARCHAR2(50) NOT NULL,
CONSTRAINT fk_GGM foreign key (O_USERGROUPID) references TBL_NEW_CORE_USERGROUP(O_USERGROUPID),
CONSTRAINT fk_MGM foreign key (O_MENUID) references TBL_NEW_CORE_MENU(O_MENUID)
);

CREATE TABLE TBL_NEW_CORE_USERGROUP_USER (
O_ID NVARCHAR2(50) DEFAULT SYS_GUID() PRIMARY KEY NOT NULL,
O_USERGROUPID NVARCHAR2(50) NOT NULL,
O_USERID NVARCHAR2(50) NOT NULL,
CONSTRAINT fk_GGU foreign key (O_USERGROUPID) references TBL_NEW_CORE_USERGROUP(O_USERGROUPID)
);

-- ----------------------------
-- Records of TBL_NEW_CORE_MENU
-- ----------------------------
INSERT INTO TBL_NEW_CORE_MENU VALUES ('5BB3FF77C0ECAA93E050A8C018002BAC', '-1', '嘉兴国鸿', '0', '0', 'home.html', '1');
INSERT INTO TBL_NEW_CORE_MENU VALUES ('5BB3FF77C0EFAA93E050A8C018002BAC', '5BB3FF77C0ECAA93E050A8C018002BAC', '基础数据', '1', '200', '#', '1');
INSERT INTO TBL_NEW_CORE_MENU VALUES ('5BB3FF77C0EEAA93E050A8C018002BAC', '5BB3FF77C0ECAA93E050A8C018002BAC', '系统管理', '1', '100', '#', '1');
INSERT INTO TBL_NEW_CORE_MENU VALUES ('5BB3FF77C0F0AA93E050A8C018002BAC', '5BB3FF77C0EEAA93E050A8C018002BAC', '用户管理', '2', '100001', 'user.html', '1');
INSERT INTO TBL_NEW_CORE_MENU VALUES ('5BB3FF77C0F1AA93E050A8C018002BAC', '5BB3FF77C0EEAA93E050A8C018002BAC', '角色管理', '2', '100002', 'role.html', '1');
INSERT INTO TBL_NEW_CORE_MENU VALUES ('5BB3FF77C0F2AA93E050A8C018002BAC', '5BB3FF77C0EFAA93E050A8C018002BAC', '部门管理', '2', '200001', 'department.html', '1');
INSERT INTO TBL_NEW_CORE_MENU VALUES ('5BB3FF77C0F3AA93E050A8C018002BAC', '5BB3FF77C0EFAA93E050A8C018002BAC', '车辆管理', '2', '200002', 'vehicle.html', '1');
INSERT INTO TBL_NEW_CORE_MENU VALUES ('5BB3FF77C0F4AA93E050A8C018002BAC', '5BB3FF77C0EFAA93E050A8C018002BAC', '人员管理', '2', '200003', 'employer.html', '1');

INSERT INTO TBL_NEW_CORE_USERGROUP (O_USERGROUPID, O_USERGROUPNAME) VALUES ('5BBB03C938B9E26AE050A8C018000358', '超级管理员');

INSERT INTO TBL_NEW_CORE_USERGROUP_MENU (O_USERGROUPID, O_MENUID) VALUES ('5BBB03C938B9E26AE050A8C018000358', '5BB3FF77C0ECAA93E050A8C018002BAC');
INSERT INTO TBL_NEW_CORE_USERGROUP_MENU (O_USERGROUPID, O_MENUID) VALUES ('5BBB03C938B9E26AE050A8C018000358', '5BB3FF77C0EFAA93E050A8C018002BAC');
INSERT INTO TBL_NEW_CORE_USERGROUP_MENU (O_USERGROUPID, O_MENUID) VALUES ('5BBB03C938B9E26AE050A8C018000358', '5BB3FF77C0EEAA93E050A8C018002BAC');
INSERT INTO TBL_NEW_CORE_USERGROUP_MENU (O_USERGROUPID, O_MENUID) VALUES ('5BBB03C938B9E26AE050A8C018000358', '5BB3FF77C0F0AA93E050A8C018002BAC');
INSERT INTO TBL_NEW_CORE_USERGROUP_MENU (O_USERGROUPID, O_MENUID) VALUES ('5BBB03C938B9E26AE050A8C018000358', '5BB3FF77C0F1AA93E050A8C018002BAC');
INSERT INTO TBL_NEW_CORE_USERGROUP_MENU (O_USERGROUPID, O_MENUID) VALUES ('5BBB03C938B9E26AE050A8C018000358', '5BB3FF77C0F2AA93E050A8C018002BAC');
INSERT INTO TBL_NEW_CORE_USERGROUP_MENU (O_USERGROUPID, O_MENUID) VALUES ('5BBB03C938B9E26AE050A8C018000358', '5BB3FF77C0F3AA93E050A8C018002BAC');
INSERT INTO TBL_NEW_CORE_USERGROUP_MENU (O_USERGROUPID, O_MENUID) VALUES ('5BBB03C938B9E26AE050A8C018000358', '5BB3FF77C0F4AA93E050A8C018002BAC');

INSERT INTO TBL_NEW_CORE_USERGROUP_USER(O_USERGROUPID, O_USERID) VALUES('5BBB03C938B9E26AE050A8C018000358', '303e3065-c1ca-4865-bf94-969e181dd283');

UPDATE TBL_NEW_CORE_MENU set O_MENUSORTID = '1' where O_MENUID = '5BB3FF77C0EEAA93E050A8C018002BAC'

/* 查询所有节点 */
select * 
from TBL_NEW_CORE_MENU start with O_MENULEVEL = 0 connect by prior O_MENUID = O_MENUPEVID 
ORDER SIBLINGS BY O_MENULEVEL

/* 从父节点查询子节点 */
select * 
from TBL_NEW_CORE_MENU start with O_MENUID = '5BB3FF77C0EEAA93E050A8C018002BAC' connect by prior O_MENUID = O_MENUPEVID
ORDER SIBLINGS BY O_MENULEVEL DESC

/* 从子节点查询父节点 */
select * 
from TBL_NEW_CORE_MENU start with O_MENUID = '5BB3FF77C0F1AA93E050A8C018002BAC' connect by prior O_MENUPEVID = O_MENUID
ORDER SIBLINGS BY O_MENULEVEL

